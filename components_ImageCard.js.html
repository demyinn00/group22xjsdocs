<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/ImageCard.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/ImageCard.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Imagecard web component
 * @module ImageCard.js
 */

const link = document.createElement('link');
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = '../styles/imagecard.css';

/**
 * TODO (Not a priority) The class names for each template still refer to every entry as 'ingredient'
 * Currently works as is and reworking this will not change any functionality. It would only be for code readability.
 */
const imageCardTemplate = document.createElement('template');
imageCardTemplate.innerHTML = `
  &lt;section class="ingredients-section">
    &lt;h3 class='title'>&lt;/h3>
    &lt;button class="left-arrow">&lt;img src="../assets/leftArrow.svg"/>&lt;/button>
    &lt;button class="right-arrow">&lt;img src="../assets/rightArrow.svg"/>&lt;/button>
    &lt;section class="ingredients-list">
    &lt;/section>
  &lt;/section>
`;

const entryElementTemplate = document.createElement('template');
entryElementTemplate.innerHTML = `
  &lt;article class="ingredient-card">
    &lt;img class="ingredient-image" src="http://placekitten.com/200/300" alt="ingredient-image"/>
    &lt;p class="ingredient-name">Pineapple Sliced&lt;/p>
    &lt;p class="ingredient-measurements">&lt;/p>
  &lt;/article>
`;

// This function takes in a number and return it in fraction form and as a string
// If it can't do this, the value is returned as a string rounded to 2 decimal places
function toFraction(value) {
  if (value % 1 === 0) {
    return value.toString();
  }

  const denominators = [2, 3, 4, 5, 6, 8, 10, 12, 14, 16, 32, 64];
  for (const denominator of denominators) {
    let str = '';
    if (Math.floor(value)) str += Math.floor(value);
    if ((value * denominator) % 1 &lt; 0.0001) {
      const numerator = (value % 1) * denominator;
      return `${str} ${numerator}/${denominator}`;
    }

    if ((value * denominator) % 1 > 0.9999) {
      const numerator = ((value % 1) + 1) * denominator;
      return `${str} ${numerator}/${denominator}`;
    }
  }
  return value.toFixed(2);
}

// Taken from https://flexiple.com/javascript-capitalize-first-letter/
function capitalize(str) {
  // split the above string into an array of strings
  // whenever a blank space is encountered
  const arr = str.split(' ');

  // loop through each element of the array and capitalize the first letter.
  for (let i = 0; i &lt; arr.length; i += 1) {
    arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].slice(1);
  }

  // Join all the elements of the array back into a string
  // using a blankspace as a separator
  const str2 = arr.join(' ');
  return str2;
}

class ImageCard extends HTMLElement {
  set ingredients(ingredientArr) {
    if (this.equipment) {
      console.err('Already set as equipment'); // Check if card has already been set
      return;
    }

    // Set title to 'Ingredients'
    const title = this.shadow.querySelector('.title');
    title.innerHTML = 'Ingredients &lt;button class="instructions-link" hidden>Go to Instructions&lt;/button>';
    // Create an ingredient entry for each element of ingredientsArr
    for (let i = 0; i &lt; ingredientArr.length; i += 1) {
      const entry = entryElementTemplate.content.cloneNode(true);
      entry.querySelector('.ingredient-card').id = i;
      entry.querySelector('.ingredient-image').src = `https://spoonacular.com/cdn/ingredients_100x100/${ingredientArr[i].image}`;
      entry.querySelector('.ingredient-name').innerHTML = capitalize(ingredientArr[i].name);
      entry.querySelector('.ingredient-measurements').innerHTML = `${toFraction(ingredientArr[i].amount)} &lt;span>&lt;/span>`;
      entry.querySelector('span').innerHTML = ingredientArr[i].unit;

      const ingredientList = this.shadow.querySelector('.ingredients-list');
      ingredientList.appendChild(entry);
    }
  }

  set equipment(equipmentArr) {
    if (this.equipment) {
      console.err('Already set as ingredients'); // Check if card has already been set
      return;
    }

    // Set title to 'Equipment'
    const title = this.shadow.querySelector('.title');
    title.innerHTML = 'Equipment ';

    // Create an equipment entry for each element of equipmentArr
    for (let i = 0; i &lt; equipmentArr.length; i += 1) {
      const entry = entryElementTemplate.content.cloneNode(true);
      entry.querySelector('.ingredient-card').id = i;
      entry.querySelector('.ingredient-image').src = `https://spoonacular.com/cdn/equipment_100x100/${equipmentArr[i].image}`;
      entry.querySelector('.ingredient-name').innerHTML = capitalize(equipmentArr[i].name);

      this.shadow.querySelector('.ingredients-list').appendChild(entry);
    }
  }

  constructor() {
    super();
    this.shadow = this.attachShadow({ mode: 'open' });
    this.shadow.appendChild(imageCardTemplate.content.cloneNode(true));
    this.shadow.appendChild(link.cloneNode(true));
  }

  connectedCallback() {
    // const showAllButton = this.shadow.querySelector('.show-all');
    const leftArrow = this.shadow.querySelector('.left-arrow');
    const rightArrow = this.shadow.querySelector('.right-arrow');

    // Show all button functionality (Has to be performed in connectedCallback so that 'this' contains correct value)
    leftArrow.addEventListener('click', () => {
      this.shadow.querySelector('.ingredients-list').scrollLeft -= 300;
    });
    rightArrow.addEventListener('click', () => {
      this.shadow.querySelector('.ingredients-list').scrollLeft += 300;
    });
  }
}

customElements.define('image-card-component', ImageCard);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="favorites.module_js.html">js</a></li><li><a href="homepage.module_js.html">js</a></li><li><a href="ImageCard.module_js.html">js</a></li><li><a href="Navbar.module_js.html">js</a></li><li><a href="recipe.module_js.html">js</a></li><li><a href="RecipeCard.module_js.html">js</a></li><li><a href="search.html#.module:js">js</a></li><li><a href="searchpage.module_js.html">js</a></li><li><a href="UserList.module_js.html">js</a></li><li><a href="UserLocalStorage.module_js.html">js</a></li></ul><h3>Classes</h3><ul><li><a href="Navbar.module_js-Navbar.html">Navbar</a></li><li><a href="RecipeCard.module_js-RecipeCard.html">RecipeCard</a></li><li><a href="UserLocalStorage.module_js.initLocalStorage.html">initLocalStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Dec 07 2021 07:44:45 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
